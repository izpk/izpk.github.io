define(["jquery","jqueryMD5","storage","location","common"],function(e,o,a,t,n){return{ajax:{ajax:function(o){var t="";t=o.pathname?o.pathname:"2"==o.version?n.host.name+"/api/v2/"+o.server:"2.1"==o.version?n.host.name+"/api/"+o.server+"/v2.1":n.host.name+"/api/v2.1/"+o.server;jQuery.support.cors=!0;var r=e.md5(t+JSON.stringify(o.data));e.ajax({url:t+"?verTT="+(new Date).getTime(),type:o.type||"get",data:o.data||"",success:function(t){"string"==typeof t&&(t=JSON.parse(t)),"nologin"==t.msg?(window.localStorage.clear(),e.removeCookie("User",{path:"/"}),e.removeCookie("loginInfo",{path:"/"}),e.removeCookie("Token",{path:"/"}),e.removeCookie("token",{path:"/",expires:-1}),CAICUI.isNav=!0,window.location.href=CAICUI.Common.loginLink):"success"==t.state?(a.setsingle(r,t),o.done(t)):(t.state,o.fail(t))},error:function(t){var n=a.get(r);n?o.done(n):("string"==typeof t&&(t=JSON.parse(t)),"login"!=o.server?"nologin"==t.msg?(window.localStorage.clear(),e.removeCookie("User",{path:"/"}),e.removeCookie("loginInfo",{path:"/"}),e.removeCookie("Token",{path:"/"}),e.removeCookie("token",{path:"/",expires:-1}),CAICUI.isNav=!0,window.location.href=CAICUI.Common.loginLink):"success"==t.state?o.done(t):"error"==t.state?o.done({data:[],msg:"",pageNo:1,pageSize:999,state:"success",totalCount:0}):o.fail(t):"success"==t.state?o.done(t):"error"==t.state&&o.fail(t))}})}}.ajax}});