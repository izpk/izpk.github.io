define(["jquery","underscore","backbone","storage"],function(e,r,t,a){"use strict";return t.View.extend({tagName:"div",className:"classCourseTree",template:r.template(e("#template-classCourseTree").html()),events:{"click .courseDetail-weekList-chapterA":"showTaskList","click .js-toTask":"openVideo","click .js-classCourse-task":"classCourseTask"},type:"",render:function(r){return CAICUI.render.thisCourseDetail=this,CAICUI.render.thisCourseDetail.$el.html(CAICUI.render.thisCourseDetail.template({courseId:CAICUI.render.courseId,classCourseTree:r})),setTimeout(function(){window.CAICUI.myScrollCourseStudyList?window.CAICUI.myScrollCourseStudyList.refresh():window.CAICUI.myScrollCourseStudyList=CAICUI.iGlobal.iScroll("body #wrapper-courseStudy-list"),e("body .js-task-live").on("click",function(){})},50),this},toTask:function(e){var r=CAICUI.iGlobal.getThat(e),t=r.attr("link");if(t){var a=r.attr("data-chapterid");CAICUI.render.openChapterId=a,window.location.hash=t}},openVideo:function(r){var t=CAICUI.render.courseDetail.courseActiveState,s=CAICUI.iGlobal.getThat(r),o=s.attr("link");if(o){var n=s.attr("data-chapterid"),i=s.attr("data-taskslength");CAICUI.render.openChapterId=n,CAICUI.render.openTasksNum=i,CAICUI.render.formCourseStudy=!0,CAICUI.NavVideo=!1,e("body .course-desc").attr("href",o),CAICUI.render.lastLearnChapterName=s.find(".course-list-desc").text(),CAICUI.render.lastLearnChapterLink=o,a.setsingle("playlist-index"+CAICUI.render.courseId,"c|"+s.attr("data-index")),window.location.hash=o}else 4==t?layer.msg("Sorry~ 您当前的课程已锁定",function(){}):2==t?layer.msg("Sorry~ 您当前的课程未激活",function(){}):1==t?layer.msg("Sorry~ 您当前的课程已过期",function(){}):0==t&&layer.msg("Sorry~ 您未购买当前的课程",function(){})},classCourseTask:function(e){var r=CAICUI.iGlobal.getThat(e),t=r.data("chapterid"),a=r.data("taskid"),s=(r.data("index"),"#video/"+CAICUI.render.courseId+"/"+t+"/"+a+"?return_link=classCourseStudy/"+CAICUI.render.courseId+"&return_hash=on");window.location.hash=s}})});