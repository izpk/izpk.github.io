define(["jquery","underscore","backbone"],function(e,s,a){"use strict";return a.View.extend({tagName:"div",className:"classCourse",template:s.template(e("#template-classCourse-studyIn").html()),events:{"click .teachingPlan-a":"changeClassCourse"},render:function(s){return CAICUI.render.$this=this,CAICUI.render.courseStatus=s,CAICUI.render.$this.classCourseListAjax(function(s){if(s.classCourseList.beoverdue&&s.classCourseList.beoverdue.length){CAICUI.render.classCourseList=s.classCourseList.beoverdue;var a=e("#template-classCourse-studyIn").html(),r=CAICUI.iGlobal.getTemplate(a,{classCourseList:CAICUI.render.classCourseList});CAICUI.render.$this.$el.append(r),CAICUI.render.$this.classCourseDetailDom(0)}}),this},classCourseListAjax:function(e){CAICUI.Request.ajax({server:"node-classCourseList",data:{token:CAICUI.nodeToken},done:function(s){e&&e(s)}})},classCourseDetailAjax:function(e,s){CAICUI.Request.ajax({server:"node-classCourseDetail",data:{token:CAICUI.nodeToken,memberId:CAICUI.nodeMemberId,courseId:CAICUI.render.classCourseList[e].courseId},done:function(e){s&&s(e)}})},classCourseDetailDom:function(s){CAICUI.render.$this.classCourseDetailAjax(s,function(a){var r=e("#template-classCourse-studyIn-body").html(),t=CAICUI.iGlobal.getTemplate(r,{data:a,classCourse:CAICUI.render.classCourseList[s],courseStatus:CAICUI.render.courseStatus,isClassCourseStart:!0,isStudycenterIndex:!1});e("body .classCourse-body").html(t),e("body .current-progress").each(function(){var s=e(this),a=parseInt(s.attr("data-progress"));a&&(s.addClass("active"),s.animate({width:a+"%"},1e3))}),window.CAICUI.myScrollLeft=CAICUI.iGlobal.iScroll("body #wrapper-classCourse-left"),e("body .classCourse-current-progress").each(function(){var s=e(this),a=parseInt(s.attr("data-progress"));a&&(s.addClass("active"),s.animate({width:a+"%"},1e3))}),window.CAICUI.myScrollRight=CAICUI.iGlobal.iScroll("body #wrapper-classCourse-right")})},changeClassCourse:function(e){CAICUI.iGlobal.loading("body .classCourse-body");var s=CAICUI.iGlobal.getThat(e),a=s.index();s.siblings().removeClass("active"),s.addClass("active");CAICUI.render.classCourseList[a].courseId;CAICUI.render.$this.classCourseDetailDom(a)},showClassCourseWeekInfo:function(e){CAICUI.iGlobal.getThat(e).parents(".classCourse-li").find(".classCourse-weekInfo").removeClass("hidden")},hiddenClassCourseWeekInfo:function(e){CAICUI.iGlobal.getThat(e).parents(".classCourse-li").find(".classCourse-weekInfo").addClass("hidden")}})});