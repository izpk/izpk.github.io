define(["jquery","underscore","backbone"],function(e,s,a){"use strict";return a.View.extend({tagName:"div",className:"classCourse",template:s.template(e("#template-classCourse-studyIn").html()),events:{"click .teachingPlan-a":"changeClass","click .teachingPlan-course-a":"changeClassCourse"},render:function(e){return CAICUI.render.$this=this,CAICUI.render.classIndex=0,CAICUI.render.classCourseIndex=0,CAICUI.render.courseStatus=e,CAICUI.render.$this.classCourseListAjax(function(e){e.classCourseList.studyIn&&e.classCourseList.studyIn.length&&(CAICUI.render.classCourseList=e.classCourseList.studyIn,CAICUI.render.$this.classRender(),CAICUI.render.$this.classCourseDetailDom())}),this},classCourseListAjax:function(e){CAICUI.Request.ajax({server:"node-classCourseList",data:{token:CAICUI.nodeToken},done:function(s){e&&e(s)}})},classCourseDetailAjax:function(e){CAICUI.Request.ajax({server:"node-classCourseDetail",data:{token:CAICUI.nodeToken,memberId:CAICUI.nodeMemberId,courseId:CAICUI.render.classCourseList[CAICUI.render.classIndex].classCourse[CAICUI.render.classCourseIndex].courseId},done:function(s){e&&e(s)}})},classCourseDetailDom:function(){CAICUI.render.$this.classCourseDetailAjax(function(s){var a=e("#template-classCourse-studyIn-body").html(),r=CAICUI.iGlobal.getTemplate(a,{data:s,classCourse:CAICUI.render.classCourseList[CAICUI.render.classIndex],courseStatus:CAICUI.render.courseStatus,isClassCourseStart:!0,isStudycenterIndex:!1});e("body .classCourse-body").html(r),e("body .current-progress").each(function(){var s=e(this),a=parseInt(s.attr("data-progress"));a&&(s.addClass("active"),s.animate({width:a+"%"},1e3))}),window.CAICUI.myScrollLeft=CAICUI.iGlobal.iScroll("body #wrapper-classCourse-left"),e("body .classCourse-current-progress").each(function(){var s=e(this),a=parseInt(s.attr("data-progress"));a&&(s.addClass("active"),s.animate({width:a+"%"},1e3))}),window.CAICUI.myScrollRight=CAICUI.iGlobal.iScroll("body #wrapper-classCourse-right")})},classRender:function(){var s=e("#template-classCourse-studyIn").html(),a=CAICUI.iGlobal.getTemplate(s,{classIndex:CAICUI.render.classIndex,classCourseIndex:CAICUI.render.classCourseIndex,classCourseList:CAICUI.render.classCourseList});CAICUI.render.$this.$el.html(a),CAICUI.render.$this.classCourseDetailDom()},changeClass:function(e){var s=CAICUI.iGlobal.getThat(e);if(s.hasClass("active"))return!1;var a=s.index();s.siblings().removeClass("active"),s.addClass("active"),CAICUI.render.classIndex=a,CAICUI.render.classCourseIndex=0,this.classRender()},changeClassCourse:function(e){var s=CAICUI.iGlobal.getThat(e);if(s.hasClass("active"))return!1;var a=s.index();s.siblings().removeClass("active"),s.addClass("active"),CAICUI.render.classCourseIndex=a,this.classRender()},showClassCourseWeekInfo:function(e){CAICUI.iGlobal.getThat(e).parents(".classCourse-li").find(".classCourse-weekInfo").removeClass("hidden")},hiddenClassCourseWeekInfo:function(e){CAICUI.iGlobal.getThat(e).parents(".classCourse-li").find(".classCourse-weekInfo").addClass("hidden")}})});