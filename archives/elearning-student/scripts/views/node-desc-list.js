define(["jquery","underscore","backbone"],function(e,t,r){"use strict";return r.View.extend({tagName:"div",className:"node-right-content",template:t.template(e("#template-node-desc-list").html()),events:{"click .node-editor-isOpen-button":"isOpen"},type:"",render:function(e){return this.$el.html(this.template({data:e})),this.$showPhotoImgBig=this.$(".show-photo-img-big"),this},getThat:function(t){return e(t.currentTarget)},isOpen:function(e){var t=CAICUI.iGlobal.getThat(e),r=t.prev(),a=t.parents(".node-desc-li");CAICUI.render.nodeId=a.attr("data-id"),CAICUI.render.content=a.attr("data-contentsummary"),CAICUI.render.imgPath=a.attr("data-imgpath"),CAICUI.render.taskId=a.attr("data-taskid"),CAICUI.render.taskProgress=a.attr("data-taskprogress"),t.hasClass("active")?(t.removeClass("active"),r.text("私有"),CAICUI.render.isPublic=1,a.attr("data-ispublic",CAICUI.render.isPublic),this.listNodesave()):(t.addClass("active"),r.text("公开"),CAICUI.render.isPublic=0,a.attr("data-ispublic",CAICUI.render.isPublic),this.listNodesave())},listNodesave:function(){CAICUI.Request.ajax({server:"nodesave",data:{token:CAICUI.User.token,id:CAICUI.render.nodeId,content:CAICUI.render.content,courseId:CAICUI.render.courseId,clientType:CAICUI.render.clientType,title:CAICUI.render.title,isPublic:CAICUI.render.isPublic,subjectId:CAICUI.render.subjectId,categoryId:CAICUI.render.categoryId,chapterId:CAICUI.render.chapterId,subjectName:CAICUI.render.subjectName,categoryName:CAICUI.render.categoryName,courseName:CAICUI.render.courseName,chapterName:CAICUI.render.chapterName,taskProgress:CAICUI.render.taskProgress,taskId:CAICUI.render.taskId,taskName:CAICUI.render.taskName,imgPath:CAICUI.render.imgPath},done:function(e){},fail:function(e){layer.msg("Sorry~ 笔记保存失败",function(){})}})},addPhotoRemove:function(e){this.getThat(e).parent().remove()},editorCancel:function(e){},editorConfirm:function(e){},showPhoto:function(e){var t=this.getThat(e);t.siblings().removeClass("active"),t.toggleClass("active");var r=t.children("img").attr("src");this.$showPhotoImgBig.attr("src",r)}})});