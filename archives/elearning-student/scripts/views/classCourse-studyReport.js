define(["jquery","underscore","backbone"],function(e,s,t){"use strict";return t.View.extend({el:"body #right",template:s.template(e("#template-studyReport").html()),events:{"click .studyReportWeek":"changeWeek","click .studyReportType":"changeType","click .studyReport-content-all":"openBox","click .js-studyReport-menu-li":"changeClass","click .teachingPlan-course-a":"changeClassCourse"},render:function(){CAICUI.render.thisStudyReport=this,CAICUI.render.classIndex=0,CAICUI.render.classCourseIndex=0,this.$el.html(this.template()),CAICUI.render.thisStudyReport.classCourseListAjax(function(e){e.classCourseList.studyIn&&e.classCourseList.studyIn.length&&(CAICUI.render.classCourseList=e.classCourseList.studyIn,CAICUI.render.thisStudyReport.classRender())})},classCourseListAjax:function(e){CAICUI.Request.ajax({server:"node-classCourseList",data:{token:CAICUI.nodeToken},done:function(s){e&&e(s)}})},classCourseDetailAjax:function(e){CAICUI.Request.ajax({server:"node-classCourseDetail",data:{token:CAICUI.nodeToken,memberId:CAICUI.nodeMemberId,courseId:CAICUI.render.classCourseList[CAICUI.render.classIndex].classCourse[CAICUI.render.classCourseIndex].courseId},done:function(s){e&&e(s)}})},classRender:function(){var s=e("#template-studyReport-class-nav").html(),t=CAICUI.iGlobal.getTemplate(s,{classIndex:CAICUI.render.classIndex,classCourseIndex:CAICUI.render.classCourseIndex,classCourseList:CAICUI.render.classCourseList});e("body .studyReport-menu").html(t);s=e("#template-studyReport-course-nav").html(),t=CAICUI.iGlobal.getTemplate(s,{classIndex:CAICUI.render.classIndex,classCourseIndex:CAICUI.render.classCourseIndex,classCourseList:CAICUI.render.classCourseList});e("body .teachingPlan-course-nav").html(t),CAICUI.render.thisStudyReport.classCourseDetailDom()},changeClass:function(e){var s=CAICUI.iGlobal.getThat(e);if(s.hasClass("active"))return!1;var t=s.index();s.siblings().removeClass("active"),s.addClass("active"),CAICUI.render.classIndex=t,CAICUI.render.classCourseIndex=0,this.classRender()},changeClassCourse:function(e){var s=CAICUI.iGlobal.getThat(e);if(s.hasClass("active"))return!1;var t=s.index();s.siblings().removeClass("active"),s.addClass("active"),CAICUI.render.classCourseIndex=t,this.classRender()},classCourseDetailDom:function(){CAICUI.render.thisStudyReport.classCourseDetailAjax(function(s){CAICUI.render.classCourseDetail=s;var t=s.planInfo[parseInt(s.weekIngNum)];console.log(t);var r=e("#template-studyReport-main").html(),a=CAICUI.iGlobal.getTemplate(r);e("body .studyReport-content-main").html(a);r=e("#template-studyReport-content-left").html(),a=CAICUI.iGlobal.getTemplate(r,{data:s,classCourseId:s.courseInfo.courseId,weekIngInfo:t,isClassCourseStart:!0,isStudycenterIndex:!0});e("body .studyReport-content-left").html(a),window.CAICUI.myScrollWeekNav=CAICUI.iGlobal.iScroll("body #wrapper-week-nav");r=e("#template-studyReport-content-right").html(),a=CAICUI.iGlobal.getTemplate(r,{data:s,classCourseId:s.courseInfo.courseId,weekIngInfo:t,isClassCourseStart:!0,isStudycenterIndex:!0});e("body .studyReport-content-right").html(a),window.CAICUI.myScrollWeekContent=CAICUI.iGlobal.iScroll("body #wrapper-week-content")})},changeWeek:function(s){var t=CAICUI.iGlobal.getThat(s),r=t.index();t.addClass("active").siblings().removeClass("active");var a=CAICUI.render.classCourseDetail.planInfo[r];console.log(a);var n=e("#template-studyReport-content-right").html(),o=CAICUI.iGlobal.getTemplate(n,{data:CAICUI.render.classCourseDetail,classCourseId:CAICUI.render.classCourseDetail.courseInfo.courseId,weekIngInfo:a,isClassCourseStart:!0,isStudycenterIndex:!0});e("body .studyReport-content-right").html(o),window.CAICUI.myScrollWeekContent=CAICUI.iGlobal.iScroll("body #wrapper-week-content")},changeType:function(s){var t=s.currentTarget,r=e(t),a=r.index();r.addClass("active").siblings().removeClass("active"),e("body .studyReport-type").eq(a).addClass("active").siblings().removeClass("active"),window.CAICUI.myScrollWeekContent.refresh()},openBox:function(s){var t=e("#template-studyReport-all").html(),r=CAICUI.iGlobal.getTemplate(t);e("body").append(r),window.CAICUI.myScroll2=CAICUI.iGlobal.iScroll("body #wrapper2"),e("body .box-close").on("click",function(){e("body .studyReport-all").remove()})}})});