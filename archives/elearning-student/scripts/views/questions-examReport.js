define(["jquery","underscore","backbone","circle"],function(e,r,n){"use strict";return n.View.extend({el:"body #right",template:r.template(e("#template-examReport").html()),events:{"click .tuichu":"backRight","click .examReport-back-left":"backLeft","click .examReport-back-right":"backRight"},render:function(r,n){CAICUI.render.knowledgePointId=r,CAICUI.render.examenNum=n;var t=this;this.randerExamReport(function(r){var n=r.examReport;CAICUI.render.courseId=n.courseId,CAICUI.render.chapterId=n.chapterId,CAICUI.render.taskId=n.taskId;var o=CAICUI.iGlobal.getTemplate(e("#template-examReport").html(),{examReportData:n});t.$el.html(o),window.CAICUI.myScroll=CAICUI.iGlobal.iScroll("body #wrapper"),e(".circle").circleProgress({size:156,startAngle:Math.PI/2,value:n.exercise.score/100,lineCap:"round",emptyFill:"rgba(0, 0, 0, 0)"}).on("circle-animation-progress",function(r,n,t){e(this).find("strong").html(parseInt(100*t))})})},randerExamReport:function(e){CAICUI.Request.ajax({server:"node-examReport",data:{memberId:CAICUI.User.memberId,knowledgePointId:CAICUI.render.knowledgePointId,examenNum:CAICUI.render.examenNum},done:function(r){e&&e(r)},fail:function(e){console.log(e)}})},closePage:function(){window.history.go(-1)},backLeft:function(){if(CAICUI.render.courseId&&CAICUI.render.courseId&&CAICUI.render.courseId){var e="#video/"+CAICUI.render.courseId+"/"+CAICUI.render.chapterId+"/"+CAICUI.render.taskId+"?return_link=classCourseStudy/"+CAICUI.render.courseId+"&return_hash=on";CAICUI.render.viewResolution=!0,window.location.hash=e}},backRight:function(){if(CAICUI.render.courseId){var e="#classCourseStudy/"+CAICUI.render.courseId;window.location.hash=e}}})});