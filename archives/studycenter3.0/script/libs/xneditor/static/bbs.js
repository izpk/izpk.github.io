function save_view_tid(i,r,t){pure_view_tids(),new_thread_days||(new_thread_days=3);var e=time(),d=$.pdata("view_tids");d||(d={}),d[i]||(d[i]={}),d[i][r]=t,$.pdata("view_tids",d);for(_fid in d)for(_tid in d[_fid])e-d[_fid][_tid]>86400*new_thread_days&&delete d[_fid][_tid]}var pure_view_tids=function(){var i=$.pdata("view_tids"),r={};for(var t in i)for(var e in i[t]){var d=i[t][e];r[e]?r[e][1]>d?(delete i[t][e],r[e]=[r[e][0],d]):(delete i[r[e][0]][e],r[e]=[t,d]):r[e]=[t,d]}$.pdata("view_tids",i)},get_view_tids=function(i,r){var i=i||0,r=r||$.pdata("view_tids");if(!r)return{};if(i)return r[i]?r[i]:{};var t={};for(var e in r)t=array_merge(t,r[e]);return t},get_new_tids=function(i){if(i)return forumlist[i]?forumlist[i].newtids:{};var r={};for(var t in forumlist)r=array_merge(r,forumlist[t].newtids);return r},diff_new_tids=function(i,r){var t={};for(var e in i)(!r[e]||r[e]<i[e])&&(t[e]=i[e]);return t};