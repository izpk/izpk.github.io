define(["jquery","underscore","backbone","layer"],function(e,t,i,o){"use strict";var n=i.View.extend({el:"body #right",template:t.template(e("#template-help").html()),events:{"click .help-video-a":"openVideo","click .studycenter-video-close":"studycenterVideoClose","click .help-feedback":"openFeedbackPop","click  embed":"toolPlayer"},render:function(){CAICUI.render.$this=this,CAICUI.render.helpVideoCcid="",CAICUI.render.helpVideoDate=[{videoTitle:"学员服务",ccid:"19ECC4DF36EFC0379C33DC5901307461"},{videoTitle:"学习中心教程完整版",ccid:"1F98FB5D622FCADE9C33DC5901307461"},{videoTitle:"学习中心首页及移动APP",ccid:"BEEE9DAC920BCAF19C33DC5901307461"},{videoTitle:"我的课程",ccid:"DB8FE72BE6A067369C33DC5901307461"},{videoTitle:"课程学习页",ccid:"0F7AC0C2DB150F6A9C33DC5901307461"},{videoTitle:"我的笔记 问答 交流",ccid:"BDF625852E6385679C33DC5901307461"}],this.$el.html(this.template({helpVideoDate:CAICUI.render.helpVideoDate})),window.CAICUI.myScroll=CAICUI.iGlobal.iScroll("body #wrapper")},openFeedbackPop:function(){CAICUI.render.feedbackType=["视频课程问题","学习中心问题","试题报错","新版建议","投诉学服"];var i=t.template(e("#template-feedback").html());e("body").append(i({feedbackType:CAICUI.render.feedbackType})),this.feedbackAnimate(".pop-html"),this.feedbackEvent()},feedbackAnimate:function(t){e(t).animate({opacity:1},1e3)},feedbackEvent:function(){var t=e("#help-feedback-pop");t&&(t.on("click",".pop-radio-label",function(){console.log(3);var t=e(this);t.siblings().removeClass("active"),t.addClass("active")}),t.on("click",".pop-button-confirm",function(){var t=e(".pop-radio-label.active").index(),i=CAICUI.render.feedbackType[t-1],n=e(".pop-textarea").val();if(!n)return void o.msg("Sorry~ 请输入内容！",function(){});var a=e(".pop-input-tel").val();return a?void CAICUI.render.$this.feedbackAjax({token:CAICUI.User.token,title:i,contact:a,content:n}):void o.msg("Sorry~ 请输入联系方式！",function(){})}),t.on("click",".pop-button-cancel",function(){t.remove(),t.off()}))},feedbackAjax:function(t){CAICUI.Request.ajax({server:"addLMG",data:t,done:function(t){e(".pop-html").remove(),o.msg("提交成功",{icon:1,time:1e3},function(){e("#help-feedback-pop").remove(),e("#help-feedback-pop").off()})},fail:function(e){o.msg("Sorry~ ",function(){})}})},openVideo:function(t){var i=CAICUI.iGlobal.getThat(t),o=i.parent().index(),n=i.attr("data-ccid");i.attr("data-videoTitle");CAICUI.render.helpVideoCcid=n,this.addAnimate(CAICUI.render.helpVideoDate[o].videoTitle,function(){e("#studycenter-video-main").append('<iframe allowtransparency="true" width="100%" height="100%" scrolling="no" frameborder="0" src="player.html" ></iframe>')})},addAnimate:function(i,o){var n=(e(window).width(),e(window).height()),a=t.template(e("#template-help-video").html());e("body").append(a({videoTitle:i})),e(".studycenter-video-close").on("click",function(){CAICUI.render.$this.removeAnimate()}),e("#animate").animate({height:n,top:"0"},300,function(){o&&o()})},removeAnimate:function(t){e("#animate").animate({height:"0",top:"50%"},300,function(){e("#animate").remove(),t&&t()})},studycenterVideoClose:function(){this.removeAnimate()}});return n});