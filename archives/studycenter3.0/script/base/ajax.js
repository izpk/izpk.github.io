define(["jquery","jqueryMD5","storage","location","common"],function(e,o,a,r,t){var n={ajax:function(o){var r="";r=o.pathname?o.pathname:"2"==o.version?t.host.name+"/api/v2/"+o.server:"2.1"==o.version?t.host.name+"/api/"+o.server+"/v2.1":t.host.name+"/api/v2.1/"+o.server;jQuery.support.cors=!0;var n=e.md5(r+JSON.stringify(o.data));e.ajax({url:r+"?verTT="+(new Date).getTime(),type:o.type||"get",data:o.data||"",success:function(r){"string"==typeof r&&(r=JSON.parse(r)),"nologin"==r.msg?(window.localStorage.clear(),e.removeCookie("User",{path:"/"}),e.removeCookie("loginInfo",{path:"/"}),e.removeCookie("Token",{path:"/"}),e.removeCookie("token",{path:"/",expires:-1}),CAICUI.isNav=!0,window.location.href=CAICUI.Common.loginLink):"success"==r.state?(a.setsingle(n,r),o.done(r)):"error"==r.state?o.fail(r):o.fail(r)},error:function(r){var t=a.get(n);return t?void o.done(t):("string"==typeof r&&(r=JSON.parse(r)),"login"==o.server?void("success"==r.state?o.done(r):"error"==r.state&&o.fail(r)):void("nologin"==r.msg?(window.localStorage.clear(),e.removeCookie("User",{path:"/"}),e.removeCookie("loginInfo",{path:"/"}),e.removeCookie("Token",{path:"/"}),e.removeCookie("token",{path:"/",expires:-1}),CAICUI.isNav=!0,window.location.href=CAICUI.Common.loginLink):"success"==r.state?o.done(r):"error"==r.state?o.done({data:[],msg:"",pageNo:1,pageSize:999,state:"success",totalCount:0}):o.fail(r)))}})}};return{ajax:n.ajax}});