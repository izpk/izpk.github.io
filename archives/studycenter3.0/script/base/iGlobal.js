define([],function(){"user strict";return{getThat:function(e){return $(e.currentTarget)},getTemplate:function(e,t){var r=_.template(e);return r(t)},getUrlPara:function(e){for(var t=location.href,r=t.indexOf("?"),n=t.substr(r+1),a=n.split("&"),l=0;l<a.length;l++){var o=a[l].split("=");if(o[0].toUpperCase()==e.toUpperCase())return decodeURI(o[1])}return""},loading:function(e,t){var r="";if(t)for(var n in t)r+=n+":"+t[n]+";";$(e).html('<div class="loader-box" style="'+r+'"><div class="loader">加载中。。。</div></div>')},iScroll:function(e){if($(e).length){var t=new IScroll(e,{probeType:3,mouseWheel:!0,scrollbars:"custom",interactiveScrollbars:!0,shrinkScrollbars:"scale"}),r=!0;return t.on("scroll",function(){this.y?r&&($(e).append('<span class="wrapper-shadow"></span>'),r=!1):($(e).find(".wrapper-shadow").remove(),r=!0)}),t}},getDate:function(e,t){if(null==e)return"";var r=e.toString();r.length>11&&(r=r.substring(0,10));var n="yyyy/MM/dd",a=new Date(1e3*parseInt(r)),l={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),"S+":a.getMilliseconds()};/(y+)/i.test(n)&&(n=n.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in l)new RegExp("("+o+")").test(n)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?l[o]:("00"+l[o]).substr((""+l[o]).length)));return n},getLocalTime:function(e,t){if(null==e)return"";var r=e.toString();r.length>11&&(r=r.substring(0,10));var n="yyyy-MM-dd h:m:s",a=new Date(1e3*parseInt(r)),l={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),"S+":a.getMilliseconds()};/(y+)/i.test(n)&&(n=n.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in l)new RegExp("("+o+")").test(n)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?l[o]:("00"+l[o]).substr((""+l[o]).length)));for(var s=n.split(" "),i=s[0]+" ",g=s[1].split(":"),c=0;c<g.length;c++)c>0&&(i+=":"),i+=1==g[c].length?"0"+g[c]:g[c];return i},formatSeconds:function(e){var t=parseInt(e),r=0,n=0;t>60&&(r=parseInt(t/60),t=parseInt(t%60),r>60&&(n=parseInt(r/60),r=parseInt(r%60)));var a="";return a=t>9?parseInt(t):t>0?"0"+parseInt(t):"00",n>0&&(r+=60*n),a=r>9?parseInt(r)+":"+a:r>0?"0"+parseInt(r)+":"+a:"00:"+a},canvasRound:function(e,t){var r=document.getElementById(e);if(r&&r.getContext){var n=r.width,a=r.height,l=r.getAttribute("data-progress");if(0==l)return!1;var o=r.getContext("2d"),s=20,i=1;t&&t.bg&&(o.beginPath(),o.arc(n/2,a/2,n/2-1,1.5*Math.PI,100,!1),o.lineWidth=1,o.strokeStyle="#f00",o.stroke());var g=setInterval(function(){if(i>s)clearInterval(g);else{o.clearRect(0,0,n,a),t&&t.bg&&(o.beginPath(),o.arc(n/2,a/2,n/2-1,1.5*Math.PI,100,!1),t&&t.bgBorderWidth?o.lineWidth=t.bgBorderWidth:o.lineWidth=1,t&&t.bgBorderColor?o.strokeStyle=t.bgBorderColor:o.strokeStyle="#fff",o.stroke());var e=Math.PI*(l/s*i/100*2-.5);o.beginPath(),o.arc(n/2,a/2,n/2-1,1.5*Math.PI,e,!1),t&&t.borderWidth?o.lineWidth=t.borderWidth:o.lineWidth=2,t&&t.borderColor?o.strokeStyle=t.borderColor:o.strokeStyle="#fff",o.stroke(),o.closePath()}i++},40)}},stringData:function(e){e=parseInt(e);var t="1分钟前",r=parseInt((new Date).getTime()/1e3),n=r-e;return 0>n&&(n=1),t=3600>n?Math.ceil(n/60)+"分钟前":n>=3600&&86400>n?Math.ceil(n/3600)+"小时前":n>=86400&&2592e3>n?Math.ceil(n/86400)+"天前":n>=2592e3&&31104e3>n?Math.ceil(n/2592e3)+"月前":Math.ceil(n/3600)+"年前"},filterImages:function(e){for(var t,r=/<img.*?src=(?:"|')?([^ "']*)/gi,n=0,a="";(t=r.exec(e))&&(console.log(t[1]),a+=t[1]+",",n++,!(n>3)););return a},filterHtml:function(e){var t=/<\/?[^>]*>/g,r=/[ | ]*\n/g,n=/&nbsp;/gi,a=/(^\s*)|(\s*$)/g,l=e.replace(t,"").replace(r,"").replace(n,"").replace(a,"");return l},cutstr:function(e,t){var r=0,n=0,a=new String;n=e.length;for(var l=0;n>l;l++){var o=e.charAt(l);if(r++,escape(o).length>4&&r++,a=a.concat(o),r>=t)return a=a.concat("...")}return t>r?e:void 0},html_decode:function(e){if(!e)return"";var t="";return 0==e.length?"":(t=e.replace(/&amp;/g,"&"),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&nbsp;/g," "),t=t.replace(/&#39;/g,"'"),t=t.replace(/&quot;/g,'"'),t=t.replace(/<br\/>/g,"\n"),t=t.replace(/问题补充/gi,"<br/>问题补充:"))}}});